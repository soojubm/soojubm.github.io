<!DOCTYPE html>
<html lang="ko">
<head>
	<title><%= title %></title>
</head>
<body>
	<main>
		<label>당신의 이름을 입력해주세요 : <input type="text" id="ajaxTextbox" /></label>
		<hr>
		<button type="button" class="button js-ajax-film">영화 리스트</button>
		<div class="viewer-list">
			<ul></ul>
		</div>
	
		<script>
		document.querySelector('.js-ajax-film').addEventListener('click', () => {
			var userName = document.getElementById("ajaxTextbox").value;

			const httpRequest = new XMLHttpRequest();

			httpRequest.open('GET', '/views/list_film.html');
			httpRequest.send();
			httpRequest.onreadystatechange = function() {
				if(httpRequest.readyState === 4 && httpRequest.status === 200) {
					document.querySelector('.viewer-list').innerHTML = httpRequest.responseText;
					/*
					var response = JSON.parse(this.response);
					for(var i in response) {
						var t = document.getElementById("template").cloneNode(true);
						t.children[0].innerText = response[i].id;
						t.children[1].innerText = response[i].msg;
						document.body.appendChild(t);
					}
					var response = JSON.stringify(this.response);
					*/
				}
			}
			httpRequest.onProgress = function(event) {
				 var percentComplete = (event.position / event.totalSize) * 100;
				 console.log(percentComplete);
			}
			httpRequest.onError = function(event) {
				alert("Error " + event.target.status + " occurred while receiving the document.");
			}
		});
		</script>
	</main>
<!-- 
	<script>
		// Deserializing (String → Object)
		responseObject = JSON.parse(xhr.responseText);

		// JSON → HTML String
		var newContent = '';
		newContent += '<div id="tours">';
		newContent += '<h1>Guided Tours</h1>';
		newContent += '<ul>';
		responseObject.tours.forEach(function(tour) {
			newContent += '<li class="' + tour.region + ' tour">';
			newContent += '<h2>' + tour.location + '</h2>';
			newContent += '<span class="details">' + tour.details + '</span>';
			newContent += '<button class="book">Book Now</button>';
			newContent += '</li>';
		});
		newContent += '</ul></div>';
		document.getElementById('content').innerHTML = newContent;
	</script>
-->
</body>